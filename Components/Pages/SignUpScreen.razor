@page "/signup"
@using System.ComponentModel.DataAnnotations

<PageTitle>New Game</PageTitle>

<div class="card">
    <h4 class="card-header">Sign Up</h4>
    <div class="card-body">
        <EditForm Model="@formData" FormName="SignUpForm" OnValidSubmit="HandleSubmit">
            <DataAnnotationsValidator />

            <div class="mb-3">
                <InputText @bind-Value="formData.Username" placeholder="Nome" />
            </div>
            <div class="mb-3">
                <InputText @bind-Value="formData.Email" placeholder="Email" type="email" />
            </div>
            <div class="mb-3">
                <InputText @bind-Value="formData.Password" placeholder="Senha" type="password" />
            </div>
            <div class="mb-3">
                <InputText @bind-Value="formData.RepeatedPassword" placeholder="Repita a senha" type="password" />
            </div>

            <div class="mb-3">
                <button type="submit" class="btn btn-primary">Cadastrar</button>
            </div>

            <p>Dados inseridos: @insertedData</p>
        </EditForm>
    </div>
</div>

@code {
    private SignUpFormData formData = new();
    private string insertedData = "";

    private class SignUpFormData
    {
        [Required(ErrorMessage = "O campo nome é obrigatório.")]
        public string Username { get; set; } = "";

        [Required(ErrorMessage = "O campo email é obrigatório.")]
        public string Email { get; set; } = "";

        [Required(ErrorMessage = "O campo senha é obrigatório.")]
        public string Password { get; set; } = "";

        [Required(ErrorMessage = "O campo repetir senha é obrigatório.")]
        public string RepeatedPassword { get; set; } = "";
    }

    private void HandleSubmit()
    {
        insertedData = $"{formData.Username}, {formData.Email}, {formData.Password}";
    }
}
